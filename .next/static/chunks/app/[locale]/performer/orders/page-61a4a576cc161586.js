(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[532],{1296:(e,t,r)=>{Promise.resolve().then(r.bind(r,3676))},1847:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var s=r(2115);let a=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,s.forwardRef)((e,t)=>{let{color:r="currentColor",size:i=24,strokeWidth:l=2,absoluteStrokeWidth:n,className:o="",children:d,iconNode:m,...p}=e;return(0,s.createElement)("svg",{ref:t,...c,width:i,height:i,stroke:r,strokeWidth:n?24*Number(l)/Number(i):l,className:a("lucide",o),...p},[...m.map(e=>{let[t,r]=e;return(0,s.createElement)(t,r)}),...Array.isArray(d)?d:[d]])}),l=(e,t)=>{let r=(0,s.forwardRef)((r,c)=>{let{className:l,...n}=r;return(0,s.createElement)(i,{ref:c,iconNode:t,className:a("lucide-".concat(e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),l),...n})});return r.displayName="".concat(e),r}},1873:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},3676:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>x});var s=r(5155),a=r(2115),c=r(5604),i=r(8525),l=r(2619),n=r.n(l),o=r(7828),d=r(6983),m=r(1873),p=r(9708),h=r(5016);function x(){let e=(0,c.useTranslations)("common"),t=(0,c.useLocale)(),r=(0,i.U)(),[l,x]=(0,a.useState)([]),[u,f]=(0,a.useState)(!0);(0,a.useEffect)(()=>{N()},[]);let N=async()=>{let{data:{user:e}}=await r.auth.getUser();if(!e)return;let{data:t,error:s}=await r.from("orders").select("*").in("status",["open","in_progress"]).order("created_at",{ascending:!1});if(s){console.error("Error loading orders:",s),f(!1);return}let{data:a}=await r.from("contact_purchases").select("order_id").eq("performer_id",e.id).eq("status","completed"),c=new Set((null==a?void 0:a.map(e=>e.order_id))||[]),{data:i}=await r.from("offers").select("order_id, status").eq("performer_id",e.id).eq("status","accepted"),l=new Set((null==i?void 0:i.map(e=>e.order_id))||[]),{data:n}=await r.from("offers").select("order_id").eq("performer_id",e.id),o=new Set((null==n?void 0:n.map(e=>e.order_id))||[]);x((t||[]).map(e=>({...e,contact_purchased:c.has(e.id),offer_accepted:l.has(e.id),has_offer:o.has(e.id)}))),f(!1)};return u?(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:(0,s.jsx)("p",{children:"Загрузка..."})}):(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Доступные заказы"}),(0,s.jsx)("div",{className:"space-y-4",children:l.map(r=>(0,s.jsx)("div",{className:"card",children:(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:r.title}),(0,s.jsx)("p",{className:"text-gray-600 mb-4 line-clamp-2",children:r.description}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-4 text-sm text-gray-500",children:[(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(o.A,{className:"w-4 h-4"}),r.budget?"".concat(r.budget,"€"):e("notSpecified")]}),(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(d.A,{className:"w-4 h-4"}),(0,h.a)(r.created_at)]}),(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(m.A,{className:"w-4 h-4"}),r.location]})]})]}),(0,s.jsxs)("div",{className:"ml-4 flex flex-col gap-2",children:["open"===r.status&&!r.has_offer&&(0,s.jsx)(n(),{href:"/".concat(t,"/orders/").concat(r.id),className:"btn-secondary text-sm",children:"Откликнуться"}),"open"===r.status&&r.has_offer&&!r.offer_accepted&&(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Ожидание ответа заказчика"}),r.contact_purchased?(0,s.jsx)(n(),{href:"/".concat(t,"/orders/").concat(r.id),className:"btn-primary text-sm",children:"Просмотреть контакты"}):r.offer_accepted?(0,s.jsxs)(n(),{href:"/".concat(t,"/performer/orders/").concat(r.id,"/purchase"),className:"btn-primary text-sm flex items-center justify-center gap-2",children:[(0,s.jsx)(p.A,{className:"w-4 h-4"}),"Получить контакты"]}):"in_progress"===r.status?(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Ожидание подтверждения"}):null]})]})},r.id))}),0===l.length&&(0,s.jsx)("div",{className:"text-center py-12",children:(0,s.jsx)("p",{className:"text-gray-500",children:"Нет доступных заказов"})})]})}},5016:(e,t,r)=>{"use strict";function s(e){let t="string"==typeof e?new Date(e):e,r=Math.floor((new Date().getTime()-t.getTime())/1e3);if(r<60)return"".concat(r," секунд назад");let s=Math.floor(r/60);if(s<60)return"".concat(s," минут назад");let a=Math.floor(s/60);if(a<24)return"".concat(a," ч. назад");let c=Math.floor(a/24);return"".concat(c," дн. назад")}r.d(t,{a:()=>s})},6983:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},7828:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},8525:(e,t,r)=>{"use strict";r.d(t,{U:()=>a});var s=r(5890);function a(){let e="https://rdlrzuyqbtxcszzcdtge.supabase.co",t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJkbHJ6dXlxYnR4Y3N6emNkdGdlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjY1ODE5OTMsImV4cCI6MjA4MjE1Nzk5M30.xqYNOx2JD1vQrrEob6HYJlOm5w82oMi3Hv604QLgWGY";if(!e||!t)return console.error("Supabase environment variables not configured. Please set NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY"),(0,s.createBrowserClient)(e||"https://placeholder.supabase.co",t||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0");try{return(0,s.createBrowserClient)(e,t)}catch(e){return console.error("Error creating Supabase client:",e),(0,s.createBrowserClient)("https://placeholder.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0")}}},9708:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])}},e=>{e.O(0,[223,890,619,441,255,358],()=>e(e.s=1296)),_N_E=e.O()}]);